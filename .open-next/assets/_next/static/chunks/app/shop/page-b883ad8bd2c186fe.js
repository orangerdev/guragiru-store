(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{1911:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});class s{formatWhatsAppText(e){return e}generateWhatsAppUrl(e,t){let{phoneNumber:r,defaultMessage:s}=this.config,a=encodeURIComponent([s,"",["*".concat(e.product_name,"*"),e.description?this.formatWhatsAppText(e.description):""].filter(Boolean).join("\n\n"),t?"\n\n_Pesan tambahan:_\n".concat(t):""].filter(Boolean).join("\n"));return"https://wa.me/".concat(r,"?text=").concat(a)}sendToWhatsApp(e,t){let r=this.generateWhatsAppUrl(e,t);/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location.href=r:window.open(r,"_blank","noopener,noreferrer")}updateConfig(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}constructor(){this.config={phoneNumber:"628112411915",defaultMessage:"Halo, saya tertarik dengan produk ini:"}}}let a=new s},2895:(e,t,r)=>{"use strict";function s(e){return!!e&&(e.includes("drive.google.com")||e.includes("docs.google.com"))}function a(e){if(!s(e))return null;let t=e.match(/\/file\/d\/([a-zA-Z0-9-_]+)/);if(t)return t[1];let r=e.match(/[?&]id=([a-zA-Z0-9-_]+)/);if(r)return r[1];let a=e.match(/open\?id=([a-zA-Z0-9-_]+)/);return a?a[1]:null}function n(e){let t=a(e);return t?"https://drive.google.com/uc?id=".concat(t,"&export=download"):e}function i(e,t){if(!s(e))return e;if("image"!==t)return n(e);try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,r=a(e);return r?"https://lh3.googleusercontent.com/d/".concat(r,"=s").concat(t):e}(e)}catch(t){return n(e)}}r.d(t,{X8:()=>s,sA:()=>i})},5183:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});class s{async getProducts(e){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!=null&&t.set("limit",String(e.limit)),(null==e?void 0:e.page)!=null&&t.set("page",String(e.page)),(null==e?void 0:e.order_by)&&t.set("order_by",e.order_by),(null==e?void 0:e.order)&&t.set("order",e.order);let r=t.toString()?"/api/products?".concat(t.toString()):"/api/products",s=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return(await s.json()).products||[]}catch(e){throw console.error("Error fetching products:",e),Error("Failed to fetch products. Please try again later.")}}async checkHealth(){try{return(await fetch("".concat("https://shop-db.orangerdigiart.workers.dev","/api/health"),{method:"GET",headers:{"Content-Type":"application/json"}})).ok}catch(e){return console.error("Health check failed:",e),!1}}}let a=new s},6639:(e,t,r)=>{Promise.resolve().then(r.bind(r,6748))},6748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(5183),n=r(1911),i=r(2895),l=r(5239),o=r(2115);function c(){let[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)(1),[i,c]=(0,o.useState)(!1),[h,p]=(0,o.useState)(null),[m,x]=(0,o.useState)(!0),f=(0,o.useRef)(null),g=(0,o.useRef)(!1),w=(0,o.useRef)(new Set),[b,j]=(0,o.useState)(!1),v=(0,o.useRef)(null),y=(0,o.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!g.current&&!w.current.has(e)){g.current=!0,c(!0),p(null);try{let s=await a.K.getProducts({limit:10,page:e,order_by:"datetime",order:"desc"});t(e=>r?s:[...e,...s]),x(s.length>0),w.current.add(e)}catch(e){p(e instanceof Error?e.message:"Failed to load products")}finally{g.current=!1,c(!1)}}},[]);return(0,o.useEffect)(()=>{y(1,!0)},[y]),(0,o.useEffect)(()=>{let e=()=>{v.current||(v.current=window.requestAnimationFrame(()=>{v.current=null;let e=window.scrollY>16;j(t=>t!==e?e:t)}))};return j(window.scrollY>16),window.addEventListener("scroll",e,{passive:!0}),()=>{v.current&&cancelAnimationFrame(v.current),window.removeEventListener("scroll",e)}},[]),(0,o.useEffect)(()=>{let e=f.current;if(!e)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&m&&!g.current&&n(e=>{let t=e+1;return y(t),t})},{root:null,rootMargin:"200px",threshold:0});return t.observe(e),()=>t.disconnect()},[m,y]),(0,s.jsxs)("main",{className:"mobile-shell bg-black text-white",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-30 bg-black/80 backdrop-blur supports-[backdrop-filter]:bg-black/60",children:[!b&&(0,s.jsxs)("div",{className:"mx-auto max-w-md px-4 py-5 flex flex-col items-center justify-center transition-all",children:[(0,s.jsx)("div",{className:"relative w-[120px] h-[120px] overflow-hidden rounded-full border border-white/20 shadow-lg",children:(0,s.jsx)(l.default,{src:"/assets/img/logo.webp",alt:"Gura Giru",fill:!0,className:"object-cover",sizes:"120px",priority:!0})}),(0,s.jsx)("a",{href:"https://www.instagram.com/guragirujastip/",target:"_blank",rel:"noreferrer",className:"mt-3 text-white/80 text-sm hover:text-white underline-offset-4 hover:underline",children:"@guragirujastip"})]}),b&&(0,s.jsxs)("div",{className:"mx-auto max-w-md px-4 py-2 flex items-center justify-start gap-3 transition-all",children:[(0,s.jsx)("div",{className:"relative w-10 h-10 overflow-hidden rounded-full border border-white/20",children:(0,s.jsx)(l.default,{src:"/assets/img/logo.webp",alt:"Gura Giru",fill:!0,className:"object-cover",sizes:"40px",priority:!0})}),(0,s.jsx)("a",{href:"https://www.instagram.com/guragirujastip/",target:"_blank",rel:"noreferrer",className:"text-base font-medium text-white hover:opacity-90",children:"guragiru jastip"})]})]}),(0,s.jsx)("section",{className:"mx-auto max-w-md px-4 py-3",children:(0,s.jsx)("p",{className:"text-white/70 text-sm leading-relaxed",children:"Temukan produk pilihan kami. Klik tombol WhatsApp pada setiap produk untuk langsung chat dan pesan."})}),i&&0===e.length&&(0,s.jsx)("section",{className:"mx-auto max-w-md px-2 pb-16",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Array.from({length:10}).map((e,t)=>(0,s.jsx)(u,{},t))})}),h&&(0,s.jsx)("div",{className:"mx-auto max-w-md px-4 py-8 text-center text-red-400",children:h}),!h&&(0,s.jsxs)("section",{className:"mx-auto max-w-md px-2 pb-16",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[e.map(e=>(0,s.jsx)(d,{product:e},e.id)),i&&e.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{}),(0,s.jsx)(u,{})]})]}),(0,s.jsx)("div",{ref:f,className:"h-10"}),!m&&e.length>0&&(0,s.jsx)("div",{className:"py-6 text-center text-white/30 text-xs",children:"Youâ€™ve reached the end"})]})]})}function d(e){let{product:t}=e,r=t.asset_link?(0,i.sA)(t.asset_link,t.asset_type):void 0;return(0,s.jsxs)("article",{className:"overflow-hidden rounded-xl border border-white/10 bg-white/5 fade-in",children:[(0,s.jsx)("div",{className:"relative aspect-[3/4] w-full bg-white/5",children:r?(0,s.jsx)(l.default,{src:r,alt:t.product_name,fill:!0,className:"object-cover",sizes:"(max-width: 420px) 50vw, 200px",unoptimized:(0,i.X8)(r),priority:!1}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white/30 text-xs",children:"No image"})}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold leading-snug line-clamp-2 min-h-[2.5rem]",children:t.product_name}),(0,s.jsxs)("button",{type:"button",className:"w-full whatsapp-button flex items-center justify-center gap-2 text-sm py-2",onClick:()=>n.c.sendToWhatsApp(t),children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884"})}),"WhatsApp"]})]})]})}function u(){return(0,s.jsxs)("article",{className:"overflow-hidden rounded-xl border border-white/10 bg-white/5 animate-pulse",children:[(0,s.jsx)("div",{className:"relative aspect-[3/4] w-full bg-white/10"}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsx)("div",{className:"h-3 bg-white/10 rounded w-4/5"}),(0,s.jsx)("div",{className:"h-9 bg-whatsapp-primary/20 rounded"})]})]})}}},e=>{e.O(0,[239,441,255,358],()=>e(e.s=6639)),_N_E=e.O()}]);