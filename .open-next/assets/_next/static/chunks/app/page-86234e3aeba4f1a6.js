(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1911:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});class s{formatWhatsAppText(e){return e}generateWhatsAppUrl(e,t){let{phoneNumber:r,defaultMessage:s}=this.config,n=encodeURIComponent([s,"",["*".concat(e.product_name,"*"),e.description?this.formatWhatsAppText(e.description):""].filter(Boolean).join("\n\n"),t?"\n\n_Pesan tambahan:_\n".concat(t):""].filter(Boolean).join("\n"));return"https://wa.me/".concat(r,"?text=").concat(n)}sendToWhatsApp(e,t){let r=this.generateWhatsAppUrl(e,t);/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.location.href=r:window.open(r,"_blank","noopener,noreferrer")}updateConfig(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}constructor(){this.config={phoneNumber:"628112411915",defaultMessage:"Halo, saya tertarik dengan produk ini:"}}}let n=new s},2895:(e,t,r)=>{"use strict";function s(e){return!!e&&(e.includes("drive.google.com")||e.includes("docs.google.com"))}function n(e){if(!s(e))return null;let t=e.match(/\/file\/d\/([a-zA-Z0-9-_]+)/);if(t)return t[1];let r=e.match(/[?&]id=([a-zA-Z0-9-_]+)/);if(r)return r[1];let n=e.match(/open\?id=([a-zA-Z0-9-_]+)/);return n?n[1]:null}function a(e){let t=n(e);return t?"https://drive.google.com/uc?id=".concat(t,"&export=download"):e}function l(e,t){if(!s(e))return e;if("image"!==t)return a(e);try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,r=n(e);return r?"https://lh3.googleusercontent.com/d/".concat(r,"=s").concat(t):e}(e)}catch(t){return a(e)}}r.d(t,{X8:()=>s,sA:()=>l})},4135:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var s=r(5155),n=r(5183),a=r(2115);function l(e){let{error:t}=e;return(0,s.jsx)("div",{className:"story-container",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full p-6",children:(0,s.jsxs)("div",{className:"text-center max-w-sm",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("h2",{className:"text-lg font-medium mb-2 text-red-400",children:"Oops! Something went wrong"}),(0,s.jsx)("p",{className:"text-white/60 text-sm mb-4",children:t}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-whatsapp-primary text-white rounded-full text-sm font-medium hover:bg-whatsapp-primary/80 transition-colors",children:"Try Again"})]})})})}function o(){return(0,s.jsx)("div",{className:"story-container",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative w-16 h-16 mx-auto mb-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-white/20"}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-transparent border-t-whatsapp-primary animate-spin"})]}),(0,s.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Loading Stories..."}),(0,s.jsx)("p",{className:"text-white/60 text-sm",children:"Getting latest products"})]})})})}var i=r(2619),c=r.n(i),d=r(1911);function u(e){let{modal:t,setModal:r}=e,[n,l]=(0,a.useState)(""),[o,i]=(0,a.useState)(!1),c=(0,a.useRef)(null);(0,a.useEffect)(()=>{t.isOpen&&c.current&&setTimeout(()=>{var e;null==(e=c.current)||e.focus()},300)},[t.isOpen]);let u=(0,a.useCallback)(()=>{r({...t,isOpen:!1}),l("")},[t,r]);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u()};return t.isOpen&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t.isOpen,u]);let h=async()=>{if(t.product&&!o){i(!0);try{d.c.sendToWhatsApp(t.product,n||void 0),setTimeout(()=>{u(),i(!1)},500)}catch(e){console.error("Error sending WhatsApp message:",e),i(!1)}}};return t.isOpen&&t.product?(0,s.jsx)("div",{className:"whatsapp-modal animate-slide-up",onClick:e=>{e.target===e.currentTarget&&u()},children:(0,s.jsxs)("div",{className:"w-full bg-black/95 backdrop-blur-lg p-4 pb-8 border-t border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-whatsapp-primary flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white",children:"Send to WhatsApp"}),(0,s.jsx)("p",{className:"text-xs text-white/60",children:t.product.product_name})]})]}),(0,s.jsx)("button",{onClick:u,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("textarea",{ref:c,value:n,onChange:e=>l(e.target.value),placeholder:"Add your message... (optional)",className:"w-full min-h-[100px] bg-white/10 border border-white/20 rounded-2xl px-4 py-3 text-white placeholder-white/60 resize-none focus:outline-none focus:border-whatsapp-primary focus:ring-1 focus:ring-whatsapp-primary",maxLength:500}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-xs text-white/40",children:[n.length,"/500 characters"]}),(0,s.jsx)("button",{onClick:h,disabled:o,className:"whatsapp-button flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Sending..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),(0,s.jsx)("span",{children:"Send"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-white/5 rounded-xl border border-white/10",children:[(0,s.jsxs)("div",{className:"text-sm text-white/80",children:[(0,s.jsx)("strong",{children:"Product:"})," ",t.product.product_name]}),t.product.description&&(0,s.jsx)("div",{className:"text-xs text-white/60 mt-1 line-clamp-2",children:t.product.description})]})]})}):null}let h=(0,a.memo)(function(e){let{isPlaying:t,isPaused:r,onPrev:n,onNext:l,onMessageTap:o,alwaysVisible:i=!1}=e,[c,d]=(0,a.useState)(i),[u,h]=(0,a.useState)(null),m=()=>{d(!0),i||(u&&clearTimeout(u),h(setTimeout(()=>{d(!1)},3e3)))};return(0,a.useEffect)(()=>()=>{u&&clearTimeout(u)},[u]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,s.jsx)("div",{className:"w-1/3 h-full flex items-center justify-start pl-4 cursor-pointer",onClick:e=>{e.stopPropagation(),n(),m()},onTouchEnd:e=>{e.stopPropagation(),n(),m()},children:c&&(0,s.jsx)("div",{className:"bg-black/30 rounded-full p-2 backdrop-blur-sm",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),(0,s.jsx)("div",{className:"flex-1 h-full flex items-center justify-center cursor-pointer",onClick:e=>{e.stopPropagation(),o(),m()},onTouchEnd:e=>{e.stopPropagation(),o(),m()},children:c&&(0,s.jsx)("div",{className:"bg-whatsapp-primary/20 rounded-full p-3 backdrop-blur-sm border border-whatsapp-primary/30",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-whatsapp-primary",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"})})})}),(0,s.jsx)("div",{className:"w-1/3 h-full flex items-center justify-end pr-4 cursor-pointer",onClick:e=>{e.stopPropagation(),l(),m()},onTouchEnd:e=>{e.stopPropagation(),l(),m()},children:c&&(0,s.jsx)("div",{className:"bg-black/30 rounded-full p-2 backdrop-blur-sm",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]}),!i&&!t&&(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"bg-black/50 rounded-full p-4 backdrop-blur-sm",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M8 5v14l11-7z"})})})}),!i&&r&&t&&(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"bg-black/50 rounded-full p-4 backdrop-blur-sm",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})})})})]})});var m=r(2895),p=r(5239);let x=(0,a.memo)(function(e){var t;let{product:r,onTap:n,setHolding:l}=e,[o,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),[h,x]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{i(!0),d(!1)},[r.asset_link,r.asset_type]);let w=()=>{l(!1)};return(0,a.useEffect)(()=>{let e=()=>{let e=u.current;if(!e)return;let t=Math.round(.18*window.innerHeight),r=e.scrollHeight>t;x(r),g(r)},t=window.setTimeout(e,0);return window.addEventListener("resize",e),()=>{window.clearTimeout(t),window.removeEventListener("resize",e)}},[r.description]),(0,s.jsxs)("div",{className:"relative w-full h-full cursor-pointer select-none",onClick:n,onTouchStart:()=>{l(!0)},onTouchEnd:()=>{l(!1)},onMouseDown:()=>{l(!0)},onMouseUp:w,onMouseLeave:w,children:[(0,s.jsx)("div",{className:"absolute inset-0",children:"video"===r.asset_type&&r.asset_link?(0,s.jsx)("video",{className:"w-full h-full object-cover",src:(0,m.sA)(r.asset_link),autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"metadata",onLoadStart:()=>i(!1),onError:e=>{console.error("Video loading error:",e),d(!0)},onCanPlay:()=>i(!1)}):r.asset_link&&!c?(0,s.jsx)(p.default,{src:((t=r.asset_link)?(0,m.sA)(t):t)||r.asset_link,alt:r.product_name,fill:!0,className:"object-cover",priority:!0,onLoad:()=>i(!1),onError:e=>{console.error("Image loading error:",e),d(!0)},sizes:"100vw",unoptimized:(0,m.X8)(r.asset_link)}):(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-white/10 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white/80",children:r.product_name})]})})}),o&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-white/20 border-t-white rounded-full animate-spin"})}),(0,s.jsx)("div",{className:"story-overlay",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white leading-tight",children:r.product_name}),r.description&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{ref:u,className:"text-white/90 text-sm leading-relaxed max-w-full ".concat(f?"overflow-hidden":""),style:f?{maxHeight:"30vh"}:void 0,dangerouslySetInnerHTML:{__html:r.description.replace(/\*([^*]+)\*/g,"<strong>$1</strong>").replace(/_([^_]+)_/g,"<em>$1</em>").replace(/~([^~]+)~/g,"<del>$1</del>").replace(/```([^`]+)```/g,"<code>$1</code>").replace(/\n/g,"<br>")}}),h&&f&&(0,s.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-black to-transparent"}),h&&(0,s.jsx)("button",{type:"button",className:"mt-2 text-xs text-white/70 underline underline-offset-2",onClick:e=>{e.stopPropagation(),g(e=>!e)},"aria-expanded":!f,children:f?"Show more":"Show less"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-white/20 cursor-pointer select-none",role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),n()},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),n())},children:[(0,s.jsx)("div",{className:"text-white/60 text-xs",children:"Tap to send message"}),(0,s.jsxs)("div",{className:"flex items-center text-whatsapp-primary",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"})}),(0,s.jsx)("span",{className:"text-xs font-medium",children:"WhatsApp"})]})]})]})})]})});function f(e){let{products:t,currentIndex:r,progress:n}=e;if(t.length>10){let e=Math.ceil(t.length/10),a=Math.floor(r/e),l=r%e/e*100+n/e;return(0,s.jsxs)("div",{className:"absolute top-4 left-4 right-4 z-10",children:[(0,s.jsx)("div",{className:"flex gap-1",children:Array.from({length:10}).map((e,t)=>{let r=0;return t<a?r=100:t===a&&(r=l),(0,s.jsx)("div",{className:"progress-bar flex-1",children:(0,s.jsx)("div",{className:"progress-fill",style:{width:"".concat(r,"%")}})},t)})}),(0,s.jsx)("div",{className:"mt-2 text-center",children:(0,s.jsxs)("span",{className:"text-xs text-white/60",children:[r+1," of ",t.length]})})]})}return(0,s.jsx)("div",{className:"absolute top-4 left-4 right-4 z-10",children:(0,s.jsx)("div",{className:"flex gap-1",children:t.map((e,t)=>{let a=0;return t<r?a=100:t===r&&(a=n),(0,s.jsx)("div",{className:"progress-bar flex-1",children:(0,s.jsx)("div",{className:"progress-fill",style:{width:"".concat(a,"%")}})},t)})})})}function g(e){let{products:t,story:r,messageModal:n,setMessageModal:l}=e,o=t[r.currentIndex],{goToNext:i,goToPrevious:d,currentIndex:m,progress:p,isPlaying:g,isPaused:w,setHolding:v}=r,b=function(e){let{onSwipeLeft:t,onSwipeRight:r,onSwipeUp:s,onSwipeDown:n,threshold:l=50}=e,o=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useCallback)(e=>{i.current=null,o.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}},[]);return{onTouchStart:c,onTouchMove:(0,a.useCallback)(e=>{i.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}},[]),onTouchEnd:(0,a.useCallback)(e=>{if(!o.current||!i.current)return;let a=o.current.x-i.current.x,c=o.current.y-i.current.y;Math.abs(a)>Math.abs(c)?Math.abs(a)>l&&(a>0?null==t||t():null==r||r()):Math.abs(c)>l&&(c>0?null==s||s():null==n||n()),o.current=null,i.current=null},[t,r,s,n,l])}}({onSwipeLeft:r.goToNext,onSwipeRight:r.goToPrevious,onSwipeUp:()=>{l({isOpen:!0,product:o,userMessage:""})},threshold:50});(0,a.useEffect)(()=>{let e=e=>{let t=e.target,r=!!(t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable));if(!n.isOpen&&!r)switch(e.key){case"ArrowLeft":e.preventDefault(),d();break;case"ArrowRight":case" ":e.preventDefault(),i()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,d,n.isOpen]),(0,a.useEffect)(()=>{let e=e=>e.preventDefault();return document.addEventListener("contextmenu",e),()=>document.removeEventListener("contextmenu",e)},[]);let j=()=>{l({isOpen:!0,product:o,userMessage:""})};return o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"story-container",...b,children:[(0,s.jsx)(c(),{href:"/shop",className:"absolute top-8 right-4 z-30 text-sm font-medium px-3 py-1.5 rounded-full border border-white/30 bg-yellow-400 hover:bg-white/20 active:bg-white/25 backdrop-blur-sm transition-colors","aria-label":"Lihat Semua",onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()},children:"Lihat Semua"}),(0,s.jsx)(f,{products:t,currentIndex:m,progress:p}),(0,s.jsx)(x,{product:o,onTap:j,setHolding:v}),(0,s.jsx)(h,{isPlaying:g,isPaused:w,onPrev:d,onNext:i,onMessageTap:j,alwaysVisible:!g})]}),n.isOpen&&(0,s.jsx)(u,{modal:n,setModal:l})]}):null}function w(){let{products:e,loading:t,error:r}=function(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),i=(0,a.useCallback)(async()=>{try{s(!0),o(null);let e=await n.K.getProducts();t(e)}catch(e){o(e instanceof Error?e.message:"Unknown error occurred"),console.error("Error in useProducts:",e)}finally{s(!1)}},[]);return(0,a.useEffect)(()=>{i()},[i]),{products:e,loading:r,error:l,refetch:i}}(),[i,c]=(0,a.useState)({isOpen:!1,userMessage:""}),d=function(e){let{products:t,autoPlayDuration:r=5e3,autoPlay:s=!0,onStoryEnd:n,storageKey:l}=e,[o,i]=(0,a.useState)(0),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(0),[x,f]=(0,a.useState)(!1),g=(0,a.useRef)(null),w=(0,a.useRef)(0),v=(0,a.useRef)(0),b=(0,a.useRef)(!1),j=(0,a.useCallback)(()=>{g.current&&(clearInterval(g.current),g.current=null)},[]),N=(0,a.useCallback)(()=>{o<t.length-1?(i(e=>e+1),p(0)):n&&n()},[o,t.length,n]),y=(0,a.useCallback)(()=>{o>0&&(i(e=>e-1),p(0))},[o]),k=(0,a.useCallback)(e=>{e>=0&&e<t.length&&(i(e),p(0))},[t.length]),C=(0,a.useCallback)(()=>{d(!0),h(!1),w.current=Date.now()-v.current},[]),E=(0,a.useCallback)(()=>{h(!0),v.current=Date.now()-w.current},[]),S=(0,a.useCallback)(()=>{i(0),p(0),d(!1),h(!1),v.current=0,j()},[j]),M=(0,a.useCallback)(e=>{f(e),e?E():c&&C()},[c,E,C]);return(0,a.useEffect)(()=>{if(c&&!u&&!x&&0!==t.length)return w.current=Date.now(),v.current=0,g.current=setInterval(()=>{let e=Date.now()-w.current;p(Math.min(e/r*100,100)),e>=r&&N()},50),j},[c,u,x,o,r,N,j,t.length]),(0,a.useEffect)(()=>{p(0),v.current=0,c&&(w.current=Date.now())},[o,c]),(0,a.useEffect)(()=>{s&&t.length>0&&!c&&C()},[t.length,c,C,s]),(0,a.useEffect)(()=>{if(l&&!b.current&&0!==t.length)try{let e=localStorage.getItem(l),r=null!=e?parseInt(e,10):NaN;if(!Number.isNaN(r)){let e=Math.max(0,Math.min(t.length-1,r));i(e)}}catch(e){}finally{b.current=!0}},[t.length,l]),(0,a.useEffect)(()=>{if(l&&0!==t.length)try{localStorage.setItem(l,String(o))}catch(e){}},[o,t.length,l]),(0,a.useEffect)(()=>{0!==t.length&&i(e=>Math.max(0,Math.min(t.length-1,e)))},[t.length]),(0,a.useEffect)(()=>j,[j]),{currentIndex:o,isPlaying:c,isPaused:u,progress:m,goToNext:N,goToPrevious:y,goToIndex:k,play:C,pause:E,reset:S,setHolding:M}}({products:e,autoPlayDuration:5e3,autoPlay:!1,storageKey:"storefront:lastSlideIndex",onStoryEnd:()=>{d.goToIndex(0)}});return t?(0,s.jsx)(o,{}):r?(0,s.jsx)(l,{error:r}):0===e.length?(0,s.jsx)("div",{className:"story-container",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Products Found"}),(0,s.jsx)("p",{className:"text-white/60",children:"Please check back later"})]})})}):(0,s.jsx)("div",{className:"story-container",children:(0,s.jsx)(g,{products:e,story:d,messageModal:i,setMessageModal:c})})}},4945:(e,t,r)=>{Promise.resolve().then(r.bind(r,4135))},5183:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});class s{async getProducts(e){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!=null&&t.set("limit",String(e.limit)),(null==e?void 0:e.page)!=null&&t.set("page",String(e.page)),(null==e?void 0:e.order_by)&&t.set("order_by",e.order_by),(null==e?void 0:e.order)&&t.set("order",e.order);let r=t.toString()?"/api/products?".concat(t.toString()):"/api/products",s=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return(await s.json()).products||[]}catch(e){throw console.error("Error fetching products:",e),Error("Failed to fetch products. Please try again later.")}}async checkHealth(){try{return(await fetch("".concat("https://shop-db.orangerdigiart.workers.dev","/api/health"),{method:"GET",headers:{"Content-Type":"application/json"}})).ok}catch(e){return console.error("Health check failed:",e),!1}}}let n=new s}},e=>{e.O(0,[239,619,441,255,358],()=>e(e.s=4945)),_N_E=e.O()}]);